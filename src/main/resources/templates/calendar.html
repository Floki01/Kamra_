<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Calendario</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
    <style>
        #calendarContainer {
            width: 400px;
            /* Ajusta el ancho del contenedor del calendario según tus necesidades */
            height: 400px;
            /* Ajusta la altura del contenedor del calendario según tus necesidades */
            margin: 0 auto;
            /* Centra el contenedor horizontalmente */
        }

        #calendar {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <!DOCTYPE html>
    <html>

    <head>
        <meta charset="UTF-8">
        <title>Calendario</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
    </head>

    <body>

        <div id="fechasDisponibles"></div>

        <div id="calendarContainer">
            <div id="calendar"></div>
        </div>

        <form id="dateForm" action="/agendar" method="POST">
            <input type="hidden" id="selectedDate" name="selectedDate">
            <button type="submit">Agendar</button>
        </form>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/locale-all.js"></script>

        <script>
            $(document).ready(function () {
                $('#calendar').fullCalendar({
                    // Resto de opciones del calendario...

                    selectable: true,
                    defaultView: "month",
                    viewRender: function (view, element) {
                        $('.fc-prev-button, .fc-next-button').hide();
                    },
                    select: function (start) {
                        var selectedDate = start.format();

                        // Realiza una llamada AJAX para obtener las horas disponibles
                        $.ajax({
                            url: "/test/disp",
                            data: { fecha: selectedDate },
                            success: function (data) {
                                // data contendrá la respuesta del servidor con las horas disponibles
                                // Aquí puedes mostrar las horas disponibles al usuario o realizar otras acciones

                                var fechasContainer = $('#fechasDisponibles');
                                fechasContainer.empty();

                                data.forEach(function (fecha) {
                                    var fechaElement = $('<p>').text(fecha);
                                    fechasContainer.append(fechaElement);
                                });

                                window.alert(data);
                            },
                            error: function () {
                                // Maneja cualquier error de la llamada AJAX
                            }
                        });
                    }
                });
            });
        </script>

    </body>

    </html>
</body>

</html>